<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: Script
  
    &mdash; Documentation by YARD 0.9.26
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" />

  <link rel="stylesheet" href="css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "Script";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index (S)</a> &raquo;
    
    
    <span class="title">Script</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: Script
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">Script</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>src/ruby/mail-forwarder.rb<span class="defines">,<br />
  src/ruby/create-nc-users.rb,<br /> src/ruby/share-nc-folders.rb,<br /> src/ruby/create-nc-folders.rb,<br /> src/ruby/print-email-letters.rb,<br /> src/ruby/collect-nextcloud-files-from-sus.rb</span>
</dd>
  </dl>
  
</div>


  
    <h2>
      Constant Summary
      <small><a href="#" class="constants_summary_toggle">collapse</a></small>
    </h2>

    <dl class="constants">
      
        <dt id="CHARS-constant" class="">CHARS =
          
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>BCDFGHJKMNPQRSTVWXYZ23456789</span><span class='tstring_end'>&#39;</span></span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span></pre></dd>
      
        <dt id="SPECIAL-constant" class="">SPECIAL =
          
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>-</span><span class='tstring_end'>&#39;</span></span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span></pre></dd>
      
    </dl>
  







  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#emit-instance_method" title="#emit (instance method)">#<strong>emit</strong>(s)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#exit_if_not_exists-instance_method" title="#exit_if_not_exists (instance method)">#<strong>exit_if_not_exists</strong>(path)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#gen_password_for_email-instance_method" title="#gen_password_for_email (instance method)">#<strong>gen_password_for_email</strong>(email)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>  &#x21d2; Script </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>A new instance of Script.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#run-instance_method" title="#run (instance method)">#<strong>run</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  

<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    #<strong>initialize</strong>  &#x21d2; <tt><span class='object_link'><a href="" title="Script (class)">Script</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns a new instance of Script.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/mail-forwarder.rb', line 24</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span>
    <span class='ivar'>@shutdown</span> <span class='op'>=</span> <span class='kw'>false</span>
    <span class='const'>Signal</span><span class='period'>.</span><span class='id identifier rubyid_trap'>trap</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>TERM</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>do</span> 
        <span class='const'>STDERR</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Caught SIGTERM</span><span class='tstring_end'>&quot;</span></span>
        <span class='ivar'>@shutdown</span> <span class='op'>=</span> <span class='kw'>true</span>
    <span class='kw'>end</span>
    <span class='ivar'>@mailing_lists</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='cvar'>@@schueler_for_klasse</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Main.html" title="Main (class)">Main</a></span></span><span class='period'>.</span><span class='id identifier rubyid_class_variable_get'>class_variable_get</span><span class='lparen'>(</span><span class='symbol'>:@@schueler_for_klasse</span><span class='rparen'>)</span>
    <span class='cvar'>@@klassen_order</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Main.html" title="Main (class)">Main</a></span></span><span class='period'>.</span><span class='id identifier rubyid_class_variable_get'>class_variable_get</span><span class='lparen'>(</span><span class='symbol'>:@@klassen_order</span><span class='rparen'>)</span>
    <span class='cvar'>@@teachers_for_klasse</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Main.html" title="Main (class)">Main</a></span></span><span class='period'>.</span><span class='id identifier rubyid_class_variable_get'>class_variable_get</span><span class='lparen'>(</span><span class='symbol'>:@@teachers_for_klasse</span><span class='rparen'>)</span>
    <span class='cvar'>@@shorthands</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Main.html" title="Main (class)">Main</a></span></span><span class='period'>.</span><span class='id identifier rubyid_class_variable_get'>class_variable_get</span><span class='lparen'>(</span><span class='symbol'>:@@shorthands</span><span class='rparen'>)</span>
    <span class='cvar'>@@klassen_order</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_klasse'>klasse</span><span class='op'>|</span>
        <span class='kw'>next</span> <span class='kw'>unless</span> <span class='cvar'>@@schueler_for_klasse</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rparen'>)</span>
        <span class='ivar'>@mailing_lists</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>klasse.</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klasse'>klasse</span><span class='embexpr_end'>}</span><span class='tstring_content'>@</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#SCHUL_MAIL_DOMAIN-constant" title="SCHUL_MAIL_DOMAIN (constant)">SCHUL_MAIL_DOMAIN</a></span></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbrace'>{</span>
            <span class='symbol'>:label</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Klasse </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klasse'>klasse</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
            <span class='symbol'>:recipients</span> <span class='op'>=&gt;</span> <span class='cvar'>@@schueler_for_klasse</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span>
        <span class='rbrace'>}</span>
        <span class='ivar'>@mailing_lists</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>eltern.</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klasse'>klasse</span><span class='embexpr_end'>}</span><span class='tstring_content'>@</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#SCHUL_MAIL_DOMAIN-constant" title="SCHUL_MAIL_DOMAIN (constant)">SCHUL_MAIL_DOMAIN</a></span></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbrace'>{</span>
            <span class='symbol'>:label</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Eltern der Klasse </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klasse'>klasse</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
            <span class='symbol'>:recipients</span> <span class='op'>=&gt;</span> <span class='cvar'>@@schueler_for_klasse</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_email'>email</span><span class='op'>|</span>
                <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>eltern.</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_email'>email</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>end</span>
        <span class='rbrace'>}</span>
        <span class='ivar'>@mailing_lists</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>lehrer.</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klasse'>klasse</span><span class='embexpr_end'>}</span><span class='tstring_content'>@</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#SCHUL_MAIL_DOMAIN-constant" title="SCHUL_MAIL_DOMAIN (constant)">SCHUL_MAIL_DOMAIN</a></span></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbrace'>{</span>
            <span class='symbol'>:label</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Lehrer der Klasse </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klasse'>klasse</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
            <span class='symbol'>:recipients</span> <span class='op'>=&gt;</span> <span class='lparen'>(</span><span class='lparen'>(</span><span class='cvar'>@@teachers_for_klasse</span><span class='lbracket'>[</span><span class='id identifier rubyid_klasse'>klasse</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_shorthand'>shorthand</span><span class='op'>|</span>
                <span class='id identifier rubyid_email'>email</span> <span class='op'>=</span> <span class='cvar'>@@shorthands</span><span class='lbracket'>[</span><span class='id identifier rubyid_shorthand'>shorthand</span><span class='rbracket'>]</span>
            <span class='kw'>end</span><span class='period'>.</span><span class='id identifier rubyid_reject'>reject</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_email'>email</span><span class='op'>|</span>
                <span class='id identifier rubyid_email'>email</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
            <span class='kw'>end</span>
        <span class='rbrace'>}</span>
    <span class='kw'>end</span>
    <span class='kw'>if</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#DEVELOPMENT-constant" title="DEVELOPMENT (constant)">DEVELOPMENT</a></span></span>
        <span class='ivar'>@mailing_lists</span><span class='lbracket'>[</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#VERTEILER_TEST_EMAIL-constant" title="VERTEILER_TEST_EMAIL (constant)">VERTEILER_TEST_EMAIL</a></span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbrace'>{</span>
            <span class='symbol'>:label</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Dev-Verteiler</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
            <span class='symbol'>:recipients</span> <span class='op'>=&gt;</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#VERTEILER_DEVELOPMENT_EMAILS-constant" title="VERTEILER_DEVELOPMENT_EMAILS (constant)">VERTEILER_DEVELOPMENT_EMAILS</a></span></span>
        <span class='rbrace'>}</span>
    <span class='kw'>end</span>
    <span class='kw'>begin</span>
        <span class='id identifier rubyid_imap'>imap</span> <span class='op'>=</span> <span class='const'>Net</span><span class='op'>::</span><span class='const'>IMAP</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#SCHUL_MAIL_LOGIN_IMAP_HOST-constant" title="SCHUL_MAIL_LOGIN_IMAP_HOST (constant)">SCHUL_MAIL_LOGIN_IMAP_HOST</a></span></span><span class='rparen'>)</span>
    <span class='kw'>rescue</span>
        <span class='const'>STDERR</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Unable to resolve </span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#SCHUL_MAIL_LOGIN_IMAP_HOST-constant" title="SCHUL_MAIL_LOGIN_IMAP_HOST (constant)">SCHUL_MAIL_LOGIN_IMAP_HOST</a></span></span><span class='embexpr_end'>}</span><span class='tstring_content'>, exiting...</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_exit'>exit</span><span class='lparen'>(</span><span class='int'>1</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='const'>STDERR</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Mail forwarder ready with </span><span class='embexpr_beg'>#{</span><span class='ivar'>@mailing_lists</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span><span class='embexpr_end'>}</span><span class='tstring_content'> mailing lists at </span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#MAILING_LIST_EMAIL-constant" title="MAILING_LIST_EMAIL (constant)">MAILING_LIST_EMAIL</a></span></span><span class='embexpr_end'>}</span><span class='tstring_content'>!</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="emit-instance_method">
  
    #<strong>emit</strong>(s)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


5
6
7</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/create-nc-folders.rb', line 5</span>

<span class='kw'>def</span> <span class='id identifier rubyid_emit'>emit</span><span class='lparen'>(</span><span class='id identifier rubyid_s'>s</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>__RUN__ </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_s'>s</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="exit_if_not_exists-instance_method">
  
    #<strong>exit_if_not_exists</strong>(path)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


9
10
11
12
13
14
15</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/create-nc-folders.rb', line 9</span>

<span class='kw'>def</span> <span class='id identifier rubyid_exit_if_not_exists'>exit_if_not_exists</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_emit'>emit</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>if [ ! -d \&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_path'>path</span><span class='embexpr_end'>}</span><span class='tstring_content'>\&quot; ]</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_emit'>emit</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>then</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_emit'>emit</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>    echo \&quot;Path does not exist: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_path'>path</span><span class='embexpr_end'>}</span><span class='tstring_content'>\&quot;</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_emit'>emit</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>    exit 1</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_emit'>emit</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>fi</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="gen_password_for_email-instance_method">
  
    #<strong>gen_password_for_email</strong>(email)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/print-email-letters.rb', line 11</span>

<span class='kw'>def</span> <span class='id identifier rubyid_gen_password_for_email'>gen_password_for_email</span><span class='lparen'>(</span><span class='id identifier rubyid_email'>email</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_sha2'>sha2</span> <span class='op'>=</span> <span class='const'>Digest</span><span class='op'>::</span><span class='const'>SHA256</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_sha2'>sha2</span> <span class='op'>&lt;&lt;</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#EMAIL_PASSWORD_SALT-constant" title="EMAIL_PASSWORD_SALT (constant)">EMAIL_PASSWORD_SALT</a></span></span>
    <span class='id identifier rubyid_sha2'>sha2</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_email'>email</span>
    <span class='id identifier rubyid_srand'>srand</span><span class='lparen'>(</span><span class='id identifier rubyid_sha2'>sha2</span><span class='period'>.</span><span class='id identifier rubyid_hexdigest'>hexdigest</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='lparen'>(</span><span class='int'>16</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_password'>password</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
    <span class='kw'>while</span> <span class='kw'>true</span> <span class='kw'>do</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_password'>password</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>[a-z]</span><span class='regexp_end'>/</span></span> <span class='op'>&amp;&amp;</span>
        <span class='id identifier rubyid_password'>password</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>[A-Z]</span><span class='regexp_end'>/</span></span> <span class='op'>&amp;&amp;</span>
        <span class='id identifier rubyid_password'>password</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>[0-9]</span><span class='regexp_end'>/</span></span> <span class='op'>&amp;&amp;</span>
        <span class='id identifier rubyid_password'>password</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>-</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
            <span class='kw'>break</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_password'>password</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
        <span class='int'>8</span><span class='period'>.</span><span class='id identifier rubyid_times'>times</span> <span class='kw'>do</span> 
            <span class='id identifier rubyid_c'>c</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="#CHARS-constant" title="Script::CHARS (constant)">CHARS</a></span></span><span class='period'>.</span><span class='id identifier rubyid_sample'>sample</span><span class='period'>.</span><span class='id identifier rubyid_dup'>dup</span>
            <span class='id identifier rubyid_c'>c</span><span class='period'>.</span><span class='id identifier rubyid_downcase!'>downcase!</span> <span class='kw'>if</span> <span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_sample'>sample</span> <span class='op'>==</span> <span class='int'>1</span>
            <span class='id identifier rubyid_password'>password</span> <span class='op'>+=</span> <span class='id identifier rubyid_c'>c</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_password'>password</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>-</span><span class='tstring_end'>&#39;</span></span>
        <span class='int'>4</span><span class='period'>.</span><span class='id identifier rubyid_times'>times</span> <span class='kw'>do</span> 
            <span class='id identifier rubyid_c'>c</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="#CHARS-constant" title="Script::CHARS (constant)">CHARS</a></span></span><span class='period'>.</span><span class='id identifier rubyid_sample'>sample</span><span class='period'>.</span><span class='id identifier rubyid_dup'>dup</span>
            <span class='id identifier rubyid_c'>c</span><span class='period'>.</span><span class='id identifier rubyid_downcase!'>downcase!</span> <span class='kw'>if</span> <span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_sample'>sample</span> <span class='op'>==</span> <span class='int'>1</span>
            <span class='id identifier rubyid_password'>password</span> <span class='op'>+=</span> <span class='id identifier rubyid_c'>c</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_password'>password</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="run-instance_method">
  
    #<strong>run</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/ruby/mail-forwarder.rb', line 71</span>

<span class='kw'>def</span> <span class='id identifier rubyid_run'>run</span>
    <span class='kw'>while</span> <span class='op'>!</span><span class='ivar'>@shutdown</span> <span class='kw'>do</span>
        <span class='id identifier rubyid_imap'>imap</span> <span class='op'>=</span> <span class='const'>Net</span><span class='op'>::</span><span class='const'>IMAP</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#SCHUL_MAIL_LOGIN_IMAP_HOST-constant" title="SCHUL_MAIL_LOGIN_IMAP_HOST (constant)">SCHUL_MAIL_LOGIN_IMAP_HOST</a></span></span><span class='rparen'>)</span>
        <span class='id identifier rubyid_imap'>imap</span><span class='period'>.</span><span class='id identifier rubyid_authenticate'>authenticate</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>LOGIN</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#MAILING_LIST_EMAIL-constant" title="MAILING_LIST_EMAIL (constant)">MAILING_LIST_EMAIL</a></span></span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="top-level-namespace.html#MAILING_LIST_PASSWORD-constant" title="MAILING_LIST_PASSWORD (constant)">MAILING_LIST_PASSWORD</a></span></span><span class='rparen'>)</span>
        <span class='id identifier rubyid_imap'>imap</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>INBOX</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
        
        <span class='id identifier rubyid_imap'>imap</span><span class='period'>.</span><span class='id identifier rubyid_search'>search</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>NOT</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>DELETED</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_mid'>mid</span><span class='op'>|</span>
            <span class='const'>STDERR</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_mid'>mid</span><span class='embexpr_end'>}</span><span class='tstring_content'>]</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_env'>env</span> <span class='op'>=</span> <span class='id identifier rubyid_imap'>imap</span><span class='period'>.</span><span class='id identifier rubyid_fetch'>fetch</span><span class='lparen'>(</span><span class='id identifier rubyid_mid'>mid</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ENVELOPE</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_attr'>attr</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ENVELOPE</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_body'>body</span> <span class='op'>=</span> <span class='id identifier rubyid_imap'>imap</span><span class='period'>.</span><span class='id identifier rubyid_fetch'>fetch</span><span class='lparen'>(</span><span class='id identifier rubyid_mid'>mid</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>RFC822</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_attr'>attr</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>RFC822</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_mail'>mail</span> <span class='op'>=</span> <span class='const'>Mail</span><span class='period'>.</span><span class='id identifier rubyid_read_from_string'>read_from_string</span><span class='lparen'>(</span><span class='id identifier rubyid_body'>body</span><span class='rparen'>)</span>
            <span class='id identifier rubyid_mail_body'>mail_body</span> <span class='op'>=</span> <span class='id identifier rubyid_mail'>mail</span><span class='period'>.</span><span class='id identifier rubyid_body'>body</span>
            <span class='id identifier rubyid_mail_subject'>mail_subject</span> <span class='op'>=</span> <span class='id identifier rubyid_mail'>mail</span><span class='period'>.</span><span class='id identifier rubyid_subject'>subject</span>
            <span class='kw'>if</span> <span class='id identifier rubyid_mail'>mail</span><span class='period'>.</span><span class='id identifier rubyid_header'>header</span><span class='lbracket'>[</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#VERTEILER_MAIL_HEADER-constant" title="VERTEILER_MAIL_HEADER (constant)">VERTEILER_MAIL_HEADER</a></span></span><span class='rbracket'>]</span>
                <span class='id identifier rubyid_imap'>imap</span><span class='period'>.</span><span class='id identifier rubyid_store'>store</span><span class='lparen'>(</span><span class='id identifier rubyid_mid'>mid</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>+FLAGS</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='symbol'>:Deleted</span><span class='rbracket'>]</span><span class='rparen'>)</span>
            <span class='kw'>else</span>
                <span class='id identifier rubyid_recipients'>recipients</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='lparen'>(</span><span class='id identifier rubyid_mail'>mail</span><span class='period'>.</span><span class='id identifier rubyid_to'>to</span> <span class='op'>||</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='op'>+</span> <span class='lparen'>(</span><span class='id identifier rubyid_mail'>mail</span><span class='period'>.</span><span class='id identifier rubyid_cc'>cc</span> <span class='op'>||</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span><span class='period'>.</span><span class='id identifier rubyid_uniq'>uniq</span>
                <span class='kw'>if</span> <span class='id identifier rubyid_recipients'>recipients</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#MAILING_LIST_EMAIL-constant" title="MAILING_LIST_EMAIL (constant)">MAILING_LIST_EMAIL</a></span></span><span class='rparen'>)</span>
                    <span class='const'>STDERR</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[</span><span class='embexpr_beg'>#{</span><span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%Y-%m-%d %H:%M</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>] Bouncing mail back to </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_mail'>mail</span><span class='period'>.</span><span class='id identifier rubyid_from'>from</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_mail'>mail</span><span class='period'>.</span><span class='id identifier rubyid_subject'>subject</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
                    <span class='id identifier rubyid_mail'>mail</span><span class='period'>.</span><span class='id identifier rubyid_reply_to'>reply_to</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#MAIL_SUPPORT_NAME-constant" title="MAIL_SUPPORT_NAME (constant)">MAIL_SUPPORT_NAME</a></span></span><span class='embexpr_end'>}</span><span class='tstring_content'> &lt;</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#MAIL_SUPPORT_EMAIL-constant" title="MAIL_SUPPORT_EMAIL (constant)">MAIL_SUPPORT_EMAIL</a></span></span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt;</span><span class='tstring_end'>&quot;</span></span>
                    <span class='id identifier rubyid_mail'>mail</span><span class='period'>.</span><span class='id identifier rubyid_to'>to</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_mail'>mail</span><span class='period'>.</span><span class='id identifier rubyid_from'>from</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
                    <span class='id identifier rubyid_mail'>mail</span><span class='period'>.</span><span class='id identifier rubyid_from'>from</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#MAILING_LIST_EMAIL-constant" title="MAILING_LIST_EMAIL (constant)">MAILING_LIST_EMAIL</a></span></span><span class='rbracket'>]</span>
                    <span class='id identifier rubyid_mail'>mail</span><span class='period'>.</span><span class='id identifier rubyid_cc'>cc</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
                    <span class='id identifier rubyid_mail'>mail</span><span class='period'>.</span><span class='id identifier rubyid_subject'>subject</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[Nicht zustellbar: Keine gültige Verteiler-Adresse] </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_mail_subject'>mail_subject</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
                    <span class='id identifier rubyid_mail'>mail</span><span class='period'>.</span><span class='id identifier rubyid_body'>body</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Sie haben versucht, eine E-Mail an den Verteiler zu schicken, ohne eine gültige Empfänger-E-Mail-Adresse anzugeben. Die angegebene Empfänger-E-Mail-Adresse lautete:\r\n\r\n</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#MAILING_LIST_EMAIL-constant" title="MAILING_LIST_EMAIL (constant)">MAILING_LIST_EMAIL</a></span></span><span class='embexpr_end'>}</span><span class='tstring_content'>\r\n\r\nÜberprüfen Sie bitte die E-Mail-Adresse und versuchen Sie es erneut.\r\n\r\nBei Fragen wenden Sie sich bitte an </span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#MAIL_SUPPORT_EMAIL-constant" title="MAIL_SUPPORT_EMAIL (constant)">MAIL_SUPPORT_EMAIL</a></span></span><span class='embexpr_end'>}</span><span class='tstring_content'>\r\n\r\n</span><span class='tstring_end'>&quot;</span></span>
                    <span class='id identifier rubyid_mail'>mail</span><span class='period'>.</span><span class='id identifier rubyid_deliver!'>deliver!</span>
                    <span class='id identifier rubyid_imap'>imap</span><span class='period'>.</span><span class='id identifier rubyid_copy'>copy</span><span class='lparen'>(</span><span class='id identifier rubyid_mid'>mid</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Bounced</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
                    <span class='id identifier rubyid_imap'>imap</span><span class='period'>.</span><span class='id identifier rubyid_store'>store</span><span class='lparen'>(</span><span class='id identifier rubyid_mid'>mid</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>+FLAGS</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='symbol'>:Deleted</span><span class='rbracket'>]</span><span class='rparen'>)</span>
                <span class='kw'>else</span>
                    <span class='id identifier rubyid_recipients'>recipients</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_to'>to</span><span class='op'>|</span>
                        <span class='id identifier rubyid_key'>key</span> <span class='op'>=</span> <span class='id identifier rubyid_to'>to</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span>
                        <span class='kw'>if</span> <span class='ivar'>@mailing_lists</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_key'>key</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_mail'>mail</span><span class='period'>.</span><span class='id identifier rubyid_from'>from</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>@kundenserver.de</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
                            <span class='const'>STDERR</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[</span><span class='embexpr_beg'>#{</span><span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%Y-%m-%d %H:%M</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>] Forwarding mail from </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_mail'>mail</span><span class='period'>.</span><span class='id identifier rubyid_from'>from</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'> to </span><span class='embexpr_beg'>#{</span><span class='ivar'>@mailing_lists</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:label</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'> (</span><span class='embexpr_beg'>#{</span><span class='ivar'>@mailing_lists</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:recipients</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span><span class='embexpr_end'>}</span><span class='tstring_content'> recipients): </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_mail'>mail</span><span class='period'>.</span><span class='id identifier rubyid_subject'>subject</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
                            <span class='ivar'>@mailing_lists</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:recipients</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each_slice'>each_slice</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#MAIL_FORWARD_BATCH_SIZE-constant" title="MAIL_FORWARD_BATCH_SIZE (constant)">MAIL_FORWARD_BATCH_SIZE</a></span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_batch'>batch</span><span class='op'>|</span>
                                <span class='const'>STDERR</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Forwarding mail to batch of </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_batch'>batch</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span><span class='embexpr_end'>}</span><span class='tstring_content'> recipients...</span><span class='tstring_end'>&quot;</span></span>
                                <span class='id identifier rubyid_mail'>mail</span><span class='period'>.</span><span class='id identifier rubyid_reply_to'>reply_to</span> <span class='op'>=</span> <span class='id identifier rubyid_mail'>mail</span><span class='lbracket'>[</span><span class='symbol'>:from</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_formatted'>formatted</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
                                <span class='id identifier rubyid_mail'>mail</span><span class='period'>.</span><span class='id identifier rubyid_from'>from</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_mail'>mail</span><span class='lbracket'>[</span><span class='symbol'>:from</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_formatted'>formatted</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>&lt;[^&gt;]+&gt;</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_strip'>strip</span><span class='embexpr_end'>}</span><span class='tstring_content'> &lt;</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#MAILING_LIST_EMAIL-constant" title="MAILING_LIST_EMAIL (constant)">MAILING_LIST_EMAIL</a></span></span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt;</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
                                <span class='id identifier rubyid_mail'>mail</span><span class='period'>.</span><span class='id identifier rubyid_cc'>cc</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
                                <span class='id identifier rubyid_mail'>mail</span><span class='period'>.</span><span class='id identifier rubyid_bcc'>bcc</span> <span class='op'>=</span> <span class='id identifier rubyid_batch'>batch</span>
                                <span class='id identifier rubyid_mail'>mail</span><span class='period'>.</span><span class='id identifier rubyid_to'>to</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='ivar'>@mailing_lists</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:label</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'> &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_key'>key</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt;</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
        <span class='comment'>#                         mail.sender = [MAILING_LIST_EMAIL]
</span>                                <span class='id identifier rubyid_mail'>mail</span><span class='period'>.</span><span class='id identifier rubyid_header'>header</span><span class='lbracket'>[</span><span class='const'><span class='object_link'><a href="top-level-namespace.html#VERTEILER_MAIL_HEADER-constant" title="VERTEILER_MAIL_HEADER (constant)">VERTEILER_MAIL_HEADER</a></span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>yes</span><span class='tstring_end'>&#39;</span></span>
                                <span class='id identifier rubyid_mail'>mail</span><span class='period'>.</span><span class='id identifier rubyid_deliver!'>deliver!</span>
                                <span class='id identifier rubyid_sleep'>sleep</span> <span class='float'>5.0</span>
                            <span class='kw'>end</span>
                        <span class='kw'>end</span>
                    <span class='kw'>end</span>
                    <span class='id identifier rubyid_imap'>imap</span><span class='period'>.</span><span class='id identifier rubyid_copy'>copy</span><span class='lparen'>(</span><span class='id identifier rubyid_mid'>mid</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Forwarded</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
                    <span class='id identifier rubyid_imap'>imap</span><span class='period'>.</span><span class='id identifier rubyid_store'>store</span><span class='lparen'>(</span><span class='id identifier rubyid_mid'>mid</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>+FLAGS</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='symbol'>:Deleted</span><span class='rbracket'>]</span><span class='rparen'>)</span>
                <span class='kw'>end</span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_imap'>imap</span><span class='period'>.</span><span class='id identifier rubyid_expunge'>expunge</span>
        <span class='id identifier rubyid_imap'>imap</span><span class='period'>.</span><span class='id identifier rubyid_logout'>logout</span>
        <span class='id identifier rubyid_imap'>imap</span><span class='period'>.</span><span class='id identifier rubyid_disconnect'>disconnect</span>
        <span class='const'><span class='object_link'><a href="top-level-namespace.html#MAIL_FORWARDER_SLEEP-constant" title="MAIL_FORWARDER_SLEEP (constant)">MAIL_FORWARDER_SLEEP</a></span></span><span class='period'>.</span><span class='id identifier rubyid_times'>times</span> <span class='kw'>do</span> 
            <span class='id identifier rubyid_sleep'>sleep</span> <span class='int'>1</span>
            <span class='kw'>break</span> <span class='kw'>if</span> <span class='ivar'>@shutdown</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Thu Feb 11 00:38:02 2021 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.26 (ruby-2.5.1).
</div>

    </div>
  </body>
</html>